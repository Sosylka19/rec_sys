stages:
  - test
  - deploy

test:runner:
  stage: test
  tags:
    - shell
  script:
    - echo "Runner is working!"
    - pwd
    - ls -la

deploy:db:
  stage: deploy
  tags:
    - shell
  script:
    - cd db_service
    - echo "Deploying app to remote server."
    - docker compose up -d --build
  rules:
    - changes:
      - db_service/**/*

deploy:ml:
  stage: deploy
  tags:
    - shell
  script:
    - cd ml_service
    - echo "Deploying app to remote server."
    - docker compose up -d --build
  rules:
    - changes:
      - ml_service/**/*